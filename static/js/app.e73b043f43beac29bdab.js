webpackJsonp([1],{"/Wle":function(t,e,i){t.exports=i.p+"static/media/love.73c2fb4.mp4"},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),n=i("Xxa5"),o=i.n(n),a=i("exGp"),r=i.n(a);const h=0;var l;!function(t){t.Above="Above",t.Below="Below",t.Left="Left",t.Right="Right"}(l||(l={}));var c=class{constructor(t){if(this.dy=t.length,this.dx=t[0].length,this.dy<2||this.dx<2)throw new Error("cannot initialize with the array which has less than 2 col/rows");this.blocks=new Array(this.dx*this.dy);let e=0;for(let i=0;i<this.dy;i++)for(let s=0;s<this.dx;s++)this.blocks[e]=t[i][s],t[i][s]===h&&(this.blankpos=e),e++}row(t){return Math.floor(t/this.dx)}col(t){return t%this.dx}dimensions(){return{x:this.dx,y:this.dy}}checkInRange(...t){for(let e of t)if(null==this.blocks[e])throw new Error(`Index ${e} not in range [0 .. ${this.blocks.length-1}]`)}direction(t,e){if(this.checkInRange(t,e),this.row(e)===this.row(t)){if(e%this.dx==t%this.dx-1)return l.Left;if(e%this.dx==t%this.dx+1)return l.Right}return e===t+this.dx?l.Below:e===t-this.dx?l.Above:null}hamming(){let t=0;for(let e=0,i=1,s=this.blocks.length;e<s;e++,i++)this.blocks[e]!==h&&this.blocks[e]!==i&&t++;return t}manhattan(){let t=0;for(let e=0,i=this.blocks.length;e<i;e++)this.blocks[e]!==h&&(t+=Math.abs(this.row(this.blocks[e]-1)-this.row(e))+Math.abs(this.col(this.blocks[e]-1)-this.col(e)));return t}isGoal(){for(let t=0,e=this.blocks.length;t<e;t++)if(this.blocks[t]!==h&&this.blocks[t]!==t+1)return!1;return!0}swap(t,e,i){if(this.checkInRange(e,i),this.blocks[e]!==h&&this.blocks[i]!==h)throw new Error("cannot swap non-space block");return[t[e],t[i]]=[t[i],t[e]],this.blankpos=t[e]===h?e:i,this}swapAbove(t){return this.swap(this.blocks,t,t-this.dx)}swapBelow(t){return this.swap(this.blocks,t,t+this.dx)}swapLeft(t){return this.swap(this.blocks,t,t-1)}swapRight(t){return this.swap(this.blocks,t,t+1)}slide(t){switch(this.checkInRange(t),this.direction(t,this.blankpos)){case l.Above:return this.swapAbove(t);case l.Below:return this.swapBelow(t);case l.Left:return this.swapLeft(t);case l.Right:return this.swapRight(t);default:return this}}toArray2D(){let t=0;const e=[];for(let i=0;i<this.dy;i++){const i=[];for(let e=0;e<this.dx;e++,t++)i.push(this.blocks[t]);e.push(i)}return e}},u=i("y1vT"),d=i.n(u),f=i("vy4U"),p=i.n(f),m=function(t,e){for(var i=function(t,e){for(var i=[],s=0,n=0;n<e;n++){for(var o=[],a=0;a<t;a++)o.push(++s%(t*e));i.push(o)}return i}(t,e),s=new c(i),n=["swapAbove","swapLeft","swapRight","swapBelow"],o=n.length,a=0;a<100;a++){var r=n[Math.floor(Math.random()*o)];try{s[r](s.blankpos)}catch(t){continue}}return s},v={name:"PuzzleBoard",data:function(){this._blockPositions=[],this._isStarted=!1;var t=m(this.cols,this.rows);return{isTouchNeeded:!0,blocks:t.blocks,isGoal:!1,manhattan:null,hamming:null,internalWidth:this.width,internalHeight:this.height,board:t,rafId:null}},props:{src:{type:String},sources:{type:Array},muted:{type:Boolean,default:!0},animation:{type:Boolean,default:!0},cols:{type:Number,default:4},width:{type:Number,default:300},height:{type:Number,default:300},rows:{type:Number,default:4},showNumber:{type:Boolean,default:!0},autoResize:{type:Boolean,default:!1}},computed:{cellWidth:function(){return this.internalWidth/this.cols},cellHeight:function(){return this.internalHeight/this.rows},isImage:function(){return/\.(jpg|png|webm|gif)$/i.test(this.src)},canvasStyle:function(){return{left:this.isGoal?"-100%":0}},sourceStyle:function(){return{visibility:"hidden"}}},beforeDestroy:function(){this.rafId&&cancelAnimationFrame(this.rafId)},mounted:function(){var t=this;this.onResize(),window.addEventListener("resize",d()(this.onResize.bind(this),300)),this._tmpCanvas=document.createElement("canvas"),this._tmpCtx=this._tmpCanvas.getContext("2d"),this._lastRenderVideoTime=-1,this._lastRenderTime=0,this.isImage?this.$refs.sourceImg.onload=function(){t.isTouchNeeded=!1,t._loadImageToCanvas()}:this.$refs.sourceImg.addEventListener("play",function(){t.isTouchNeeded=!1});this.$nextTick(function e(){if(p.a.update(),null==t.$refs.sourceImg||t.$refs.sourceImg.readyState<3)requestAnimationFrame(e);else{var i=t.$refs.sourceImg,s=t.$refs["puzzle-canvas"],n=s.getContext("2d"),o=t.internalWidth;if(i.currentTime!==t._lastRender&&(t._lastRenderVideoTime=i.currentTime,t._loadVideoFrameToCanvas()),t.isGoal)requestAnimationFrame(e);else{n.clearRect(0,0,t.internalWidth,t.internalHeight),t.showNumber&&(n.font="24px 'Avenir', Helvetica, Arial, sans-serif",n.fillStyle="#e91e63",n.textBaseline="top");for(var a=0,r=t.blocks.length;a<r;a++){var h=t.blocks[a];if(0!==h){var l=t.board.row(h-1),c=t.board.col(h-1),u=t.cellWidth*c+o,d=t.cellHeight*l,f=t._blockPositions[h];if(null!=f){var m=f.x,v=f.y;if(n.drawImage(s,u,d,t.cellWidth,t.cellHeight,m,v,t.cellWidth,t.cellHeight),t.showNumber){var g=String(h);n.strokeText(g,5+m,5+v),n.fillText(g,5+m,5+v)}}}}t.rafId=requestAnimationFrame(e)}}}),this.$emit("init")},watch:{cols:function(){this.initBoard()},rows:function(){this.initBoard()},board:function(){this.blocks=this.board.blocks},width:function(){this.onResize()},height:function(){this.onResize()},blocks:function(){var t=!this.animation;this.updateBlockPositions(t),this.isGoal=this.board.isGoal(),this.manhattan=this.board.manhattan(),this.hamming=this.board.hamming(),this.$emit("change",{blocks:this.blocks,isGoal:this.isGoal,distance:this.manhattan})},isGoal:function(){this.isGoal&&this.$emit("finish")},sources:function(){var t=this;this.isImage||this.$nextTick(function(){t.$refs.sourceImg.load(),t.isTouchNeeded=!0,t.$refs.sourceImg.play(),t.$refs.sourceImg.addEventListener("play",function(){t.isTouchNeeded=!1})})},src:function(){var t=this;this.isImage&&(this.isTouchNeeded=!1,this.$nextTick(function(){t.$refs.sourceImg.addEventListener("load",function(){t._loadImageToCanvas()})}))}},methods:{initBoard:function(){this.board=m(this.cols,this.rows),this._blockPositions=[],this._isStarted=!1,this.$emit("init")},updateBlockPositions:function(t){for(var e=this,i=function(i,s){var n=e.blocks[i],o=e.board.col(i),a=e.board.row(i),r=e.cellWidth*o,h=e.cellHeight*a,l=e._blockPositions[n]||{x:0,y:0};if(null==e._blockPositions[n]&&(e._blockPositions[n]=l),l.x-r==0&&l.y-h==0)return"continue";var c={x:l.x,y:l.y};t?(e._blockPositions[n].x=r,e._blockPositions[n].y=h):new p.a.Tween(c).to({x:r,y:h},200).easing(p.a.Easing.Quadratic.Out).onUpdate(function(){e._blockPositions[n].x=c.x,e._blockPositions[n].y=c.y}).start()},s=0,n=this.blocks.length;s<n;s++)i(s)},_loadImageToCanvas:function(){var t=this.$refs.sourceImg,e=this.$refs["puzzle-canvas"].getContext("2d"),i=this.width,s=this.height,n=t.width,o=t.height,a=Math.max(i/n,s/o);this._tmpCanvas.width=n*a,this._tmpCanvas.height=o*a,this._tmpCtx.drawImage(t,0,0,n*a,o*a);var r=(n*a-i)/2,h=(o*a-s)/2;e.drawImage(this._tmpCanvas,r,h,i,s,i,0,i,s)},_loadVideoFrameToCanvas:function(){var t=this.$refs.sourceImg,e=this.$refs["puzzle-canvas"].getContext("2d"),i=this.internalWidth,s=this.internalHeight,n=t.videoWidth,o=t.videoHeight,a=Math.max(i/n,s/o);this._tmpCanvas.width=n*a,this._tmpCanvas.height=o*a,this._tmpCtx.drawImage(t,0,0,n*a,o*a);var r=(n*a-i)/2,h=(o*a-s)/2;e.drawImage(this._tmpCanvas,r,h,i,s,i,0,i,s)},slide:function(t){this._isStarted||(this._isStarted=!0,this.$emit("start")),this.board.slide(t),s.a.set(this,"blocks",this.board.blocks.concat())},onTouchEnd:function(t){this.isTouchNeeded&&this.$refs.sourceImg.play();var e=t.changedTouches[0],i=this.$el.getBoundingClientRect(),s=e.clientX-i.left,n=e.clientY-i.top;this.handleClick(s,n)},onClick:function(t){var e=t.offsetX-(this.isGoal?this.width:0),i=t.offsetY;this.handleClick(e,i)},handleClick:function(t,e){t/=this.cellWidth,e/=this.cellHeight;var i=Math.floor(t),s=Math.floor(e)*this.cols+i;this.slide(s)},onClickBoard:function(){this.$el.focus()},onResize:function(){var t=this.$el.offsetWidth,e=this.$el.offsetHeight;this.autoResize?(this.internalWidth=t,this.internalHeight=e):(this.internalWidth=this.width,this.internalHeight=this.height),this.isImage&&this.$nextTick(this._loadImageToCanvas.bind(this)),this.updateBlockPositions(!0)},onKeyUp:function(t){var e=this.board.blankpos,i=this.blocks.length;switch(t.keyCode){case 37:e+1<i&&this.slide(e+1);break;case 38:e+this.cols<i&&this.slide(e+this.cols);break;case 39:e-1>=0&&this.slide(e-1);break;case 40:e-this.cols>=0&&this.slide(e-this.cols)}}}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"puzzle-board",attrs:{tabindex:"-1"},on:{keyup:function(e){return e.preventDefault(),t.onKeyUp(e)},click:t.onClickBoard}},[t.isTouchNeeded?i("div",{staticClass:"puzzle-message"},[t._v("Touch to start")]):t._e(),t._v(" "),i("canvas",{ref:"puzzle-canvas",staticClass:"puzzle-canvas",style:t.canvasStyle,attrs:{width:2*t.internalWidth,height:t.internalHeight},on:{click:function(t){t.preventDefault()},mousedown:function(t){t.preventDefault()},mouseup:function(e){return e.preventDefault(),t.onClick(e)},touchend:function(e){return e.preventDefault(),t.onTouchEnd(e)}}}),t._v(" "),t.isImage?i("img",{ref:"sourceImg",style:t.sourceStyle,attrs:{src:t.src}}):i("video",{ref:"sourceImg",style:t.sourceStyle,attrs:{autoplay:"",loop:"",playsinline:"",src:t.src,width:t.internalWidth,height:t.internalHeight},domProps:{muted:t.muted}},[t._l(t.sources,function(t){return i("source",{key:t.src,attrs:{src:t.src,type:t.type}})}),t._v("No video\n  ")],2)])},staticRenderFns:[]};var b,w=i("VU/8")(v,g,!1,function(t){i("WhH9")},"data-v-3ddee02e",null).exports,k=i("WSo8"),y=i.n(k),_=i("/Wle"),x={Love:{sources:[{src:i.n(_).a,type:"video/mp4"}]},Love2:{sources:[{src:y.a,type:"video/mp4"}]},Giphy:{}},z={Easy:{x:3,y:3},Normal:{x:4,y:4},Difficult:{x:5,y:5}},C=(b=r()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",[{src:y.a,type:"video/mp4"}]);case 1:case"end":return t.stop()}},t,this)})),function(){return b.apply(this,arguments)}),I={name:"App",components:{PuzzleBoard:w},data:function(){return{show:!0,videoTitle:"Love",difficulty:"Easy",distance:null,isGoal:!1,autoResize:!0,width:300,height:300,showNumber:!0,animation:!0,sources:x.Love.sources}},created:function(){},computed:{src:function(){return x[this.videoTitle].src},dimensions:function(){return z[this.difficulty]}},watch:{isGoal:function(t){t?this.$confetti.start({shape:"rect"}):this.$confetti.stop()}},methods:{onTitleClick:function(){window.open("https://www.facebook.com/thangnm99")},onMeowClick:function(){var t=this;C().then(function(e){t.sources=e})},onPuzzleBoardInit:function(){console.log("init"),this.isGoal=!1},onPuzzleBoardStart:function(){console.log("start")},onPuzzleBoardFinish:function(){console.log("finish"),this.isGoal=!0},onPuzzleBoardChange:function(t){console.log("change"),this.distance=t.distance}}},T={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"header"},[i("div",{staticClass:"header-item title",on:{click:t.onTitleClick}},[t._v("Hello Lan Anh!")]),t._v(" "),i("div",{staticClass:"header-item spacer"}),t._v(" "),i("div",{staticClass:"header-item meow",on:{click:t.onMeowClick}},[t._v("Đổi hình khác!")]),t._v(" "),i("div",{staticClass:"header-item spacer"}),t._v(" "),i("div",{staticClass:"header-item panel"},[t.isGoal?[t._v("finish!!")]:t._e(),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.difficulty,expression:"difficulty"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.difficulty=e.target.multiple?i:i[0]}}},[i("option",[t._v("Easy")]),t._v(" "),i("option",[t._v("Normal")]),t._v(" "),i("option",[t._v("Difficult")])])],2)]),t._v(" "),i("div",{staticClass:"container"},[t.show?i("puzzle-board",{attrs:{autoResize:t.autoResize,showNumber:t.showNumber,cols:t.dimensions.x,rows:t.dimensions.y,src:t.src,sources:t.sources,animation:t.animation,width:t.width,height:t.height},on:{init:t.onPuzzleBoardInit,start:t.onPuzzleBoardStart,change:t.onPuzzleBoardChange,finish:t.onPuzzleBoardFinish}}):t._e()],1),t._v(" "),i("div",{staticClass:"repo",on:{click:t.onTitleClick}},[t._v("made by "),i("a",{attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://www.facebook.com/thangnm99"}},[t._v("người này")])])])},staticRenderFns:[]};var $=i("VU/8")(I,T,!1,function(t){i("yJ85")},null,null).exports,B=i("4gUt"),R=i.n(B);s.a.use(R.a),s.a.config.productionTip=!1,new s.a({el:"#app",components:{App:$},template:"<App/>"})},WSo8:function(t,e,i){t.exports=i.p+"static/media/love2.5aeb159.mp4"},WhH9:function(t,e){},yJ85:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e73b043f43beac29bdab.js.map