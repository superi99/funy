{"version":3,"sources":["webpack:///./src/assets/love.mp4","webpack:///./src/board.ts","webpack:///src/components/PuzzleBoard.vue","webpack:///./src/components/PuzzleBoard.vue?a53c","webpack:///./src/components/PuzzleBoard.vue","webpack:///src/App.vue","webpack:///./src/App.vue?65e2","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/assets/love2.mp4"],"names":["module","exports","__webpack_require__","p","SPACE","Direction","src_board","[object Object]","blocks","this","dy","length","dx","Error","Array","k","i","j","blankpos","Math","floor","x","y","idxs","idx","from","to","checkInRange","row","Left","Right","Below","Above","hamming","ans","len","manhattan","abs","col","swap","direction","swapAbove","swapBelow","swapLeft","swapRight","arr","subArr","push","PuzzleBoard_createRandomBoard2D","board2D","result","n","sub","createBoard2D","board","methodNames","methodName","random","e","PuzzleBoard","name","data","_blockPositions","_isStarted","cols","rows","isTouchNeeded","isGoal","internalWidth","width","internalHeight","height","rafId","props","src","type","String","sources","muted","Boolean","default","animation","Number","showNumber","autoResize","computed","cellWidth","cellHeight","isImage","test","canvasStyle","left","sourceStyle","visibility","beforeDestroy","cancelAnimationFrame","mounted","_this","onResize","window","addEventListener","lodash_debounce_default","bind","_tmpCanvas","document","createElement","_tmpCtx","getContext","_lastRenderVideoTime","_lastRenderTime","$refs","sourceImg","onload","_loadImageToCanvas","$nextTick","loop","Tween_default","a","update","readyState","requestAnimationFrame","canvas","ctx","w","currentTime","_lastRender","_loadVideoFrameToCanvas","clearRect","font","fillStyle","textBaseline","block","sourceX","sourceY","pos","targetX","targetY","drawImage","text","strokeText","fillText","$emit","watch","initBoard","isImmediate","updateBlockPositions","distance","_this2","load","play","_this3","methods","_this4","_loop","b","obj","Tween","easing","Easing","Quadratic","Out","onUpdate","start","h","vw","vh","ratio","max","marginX","marginY","videoWidth","videoHeight","slide","vue_esm","set","concat","onTouchEnd","event","touch","changedTouches","rect","$el","getBoundingClientRect","clientX","clientY","top","handleClick","onClick","offsetX","offsetY","onClickBoard","focus","offsetWidth","offsetHeight","onKeyUp","bp","keyCode","components_PuzzleBoard","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","tabindex","on","keyup","$event","preventDefault","click","_v","_e","ref","style","mousedown","mouseup","touchend","autoplay","playsinline","domProps","_l","source","key","staticRenderFns","_ref","src_components_PuzzleBoard","normalizeComponent","ssrContext","SOURCEPATHS","Love","Love2","love2_default","Giphy","DIMENSIONS","Easy","Normal","Difficult","getGiphySrc","asyncToGenerator_default","regenerator_default","mark","_callee","wrap","_context","prev","next","abrupt","stop","apply","arguments","App","components","show","videoTitle","difficulty","created","dimensions","_isGoal","$confetti","shape","onTitleClick","open","onMeowClick","then","onPuzzleBoardInit","console","log","onPuzzleBoardStart","onPuzzleBoardFinish","onPuzzleBoardChange","payload","selectortype_template_index_0_src_App","id","directives","rawName","value","expression","change","$$selectedVal","prototype","filter","call","target","options","o","selected","map","_value","multiple","init","finish","rel","href","src_App","App_normalizeComponent","Vue","use","VueConfetti","config","productionTip","el","template"],"mappings":"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","file":"static/js/app.e73b043f43beac29bdab.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/love.73c2fb4.mp4\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/love.mp4\n// module id = /Wle\n// module chunks = 1","const SPACE = 0;\r\nvar Direction;\r\n(function (Direction) {\r\n    Direction[\"Above\"] = \"Above\";\r\n    Direction[\"Below\"] = \"Below\";\r\n    Direction[\"Left\"] = \"Left\";\r\n    Direction[\"Right\"] = \"Right\";\r\n})(Direction || (Direction = {}));\r\nclass Board {\r\n    constructor(blocks) {\r\n        this.dy = blocks.length;\r\n        // use the length of the top of blocks\r\n        this.dx = blocks[0].length;\r\n        if (this.dy < 2 || this.dx < 2) {\r\n            // TODO: could drop some edge cases\r\n            throw new Error('cannot initialize with the array which has less than 2 col/rows');\r\n        }\r\n        this.blocks = new Array(this.dx * this.dy);\r\n        let k = 0;\r\n        for (let i = 0; i < this.dy; i++) {\r\n            for (let j = 0; j < this.dx; j++) {\r\n                this.blocks[k] = blocks[i][j];\r\n                if (blocks[i][j] === SPACE) {\r\n                    this.blankpos = k;\r\n                }\r\n                k++;\r\n            }\r\n        }\r\n    }\r\n    row(p) {\r\n        return Math.floor(p / this.dx);\r\n    }\r\n    col(p) {\r\n        return p % this.dx;\r\n    }\r\n    dimensions() {\r\n        return {\r\n            x: this.dx,\r\n            y: this.dy\r\n        };\r\n    }\r\n    checkInRange(...idxs) {\r\n        for (let idx of idxs) {\r\n            if (this.blocks[idx] == null) {\r\n                throw new Error(`Index ${idx} not in range [0 .. ${this.blocks.length - 1}]`);\r\n            }\r\n        }\r\n    }\r\n    direction(from, to) {\r\n        this.checkInRange(from, to);\r\n        if (this.row(to) === this.row(from)) {\r\n            if (to % this.dx === (from % this.dx) - 1) {\r\n                return Direction.Left;\r\n            }\r\n            if (to % this.dx === (from % this.dx) + 1) {\r\n                return Direction.Right;\r\n            }\r\n        }\r\n        if (to === from + this.dx) {\r\n            return Direction.Below;\r\n        }\r\n        if (to === from - this.dx) {\r\n            return Direction.Above;\r\n        }\r\n        return null;\r\n    }\r\n    hamming() {\r\n        let hamming = 0;\r\n        for (let k = 0, ans = 1, len = this.blocks.length; k < len; k++, ans++) {\r\n            if (this.blocks[k] === SPACE) {\r\n                continue;\r\n            }\r\n            if (this.blocks[k] !== ans) {\r\n                hamming++;\r\n            }\r\n        }\r\n        return hamming;\r\n    }\r\n    manhattan() {\r\n        let manhattan = 0;\r\n        for (let k = 0, len = this.blocks.length; k < len; k++) {\r\n            if (this.blocks[k] === SPACE) {\r\n                continue;\r\n            }\r\n            const rowdiff = Math.abs(this.row(this.blocks[k] - 1) - this.row(k));\r\n            const coldiff = Math.abs(this.col(this.blocks[k] - 1) - this.col(k));\r\n            manhattan += rowdiff + coldiff;\r\n        }\r\n        return manhattan;\r\n    }\r\n    isGoal() {\r\n        for (let k = 0, len = this.blocks.length; k < len; k++) {\r\n            if (this.blocks[k] === SPACE) {\r\n                continue;\r\n            }\r\n            else if (this.blocks[k] !== k + 1) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    swap(blocks, from, to) {\r\n        this.checkInRange(from, to);\r\n        if (this.blocks[from] !== SPACE && this.blocks[to] !== SPACE) {\r\n            // cannot swap no-empty block\r\n            throw new Error('cannot swap non-space block');\r\n        }\r\n        [blocks[from], blocks[to]] = [blocks[to], blocks[from]];\r\n        this.blankpos = blocks[from] === SPACE ? from : to;\r\n        return this;\r\n    }\r\n    swapAbove(idx) {\r\n        return this.swap(this.blocks, idx, idx - this.dx);\r\n    }\r\n    swapBelow(idx) {\r\n        return this.swap(this.blocks, idx, idx + this.dx);\r\n    }\r\n    swapLeft(idx) {\r\n        return this.swap(this.blocks, idx, idx - 1);\r\n    }\r\n    swapRight(idx) {\r\n        return this.swap(this.blocks, idx, idx + 1);\r\n    }\r\n    slide(idx) {\r\n        this.checkInRange(idx);\r\n        switch (this.direction(idx, this.blankpos)) {\r\n            case Direction.Above:\r\n                return this.swapAbove(idx);\r\n            case Direction.Below:\r\n                return this.swapBelow(idx);\r\n            case Direction.Left:\r\n                return this.swapLeft(idx);\r\n            case Direction.Right:\r\n                return this.swapRight(idx);\r\n            default:\r\n                return this;\r\n        }\r\n    }\r\n    toArray2D() {\r\n        let k = 0;\r\n        const arr = [];\r\n        for (let i = 0; i < this.dy; i++) {\r\n            const subArr = [];\r\n            for (let j = 0; j < this.dx; j++, k++) {\r\n                subArr.push(this.blocks[k]);\r\n            }\r\n            arr.push(subArr);\r\n        }\r\n        return arr;\r\n    }\r\n}\r\nexport default Board;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/board.ts\n// module id = null\n// module chunks = ","<template>\n  <div class=\"puzzle-board\" tabindex=\"-1\" @keyup.prevent=\"onKeyUp\" @click=\"onClickBoard\">\n    <div class=\"puzzle-message\" v-if=\"isTouchNeeded\">Touch to start</div>\n    <canvas\n      ref=\"puzzle-canvas\"\n      class=\"puzzle-canvas\"\n      @click.prevent\n      @mousedown.prevent\n      @mouseup.prevent=\"onClick\"\n      @touchend.prevent=\"onTouchEnd\"\n      :style=\"canvasStyle\"\n      :width=\"internalWidth * 2\"\n      :height=\"internalHeight\"\n    ></canvas>\n    <img v-if=\"isImage\" :style=\"sourceStyle\" :src=\"src\" ref=\"sourceImg\">\n    <video\n      v-else\n      ref=\"sourceImg\"\n      autoplay\n      loop\n      playsinline\n      :muted=\"muted\"\n      :src=\"src\"\n      :style=\"sourceStyle\"\n      :width=\"internalWidth\"\n      :height=\"internalHeight\"\n    >\n      <source\n        v-for=\"source of sources\"\n        v-bind:key=\"source.src\"\n        :src=\"source.src\"\n        :type=\"source.type\"\n      >No video\n    </video>\n  </div>\n</template>\n\n<script>\nimport Board from '../board.ts'\nimport Vue from 'vue'\nimport debounce from 'lodash.debounce'\nimport TWEEN from 'tween.js'\n\nconst createBoard2D = (dx, dy) => {\n  const result = []\n  let n = 0\n  for (let i = 0; i < dy; i++) {\n    const sub = []\n    for (let j = 0; j < dx; j++) {\n      sub.push(++n % (dx * dy))\n    }\n    result.push(sub)\n  }\n  return result\n}\n\nconst createRandomBoard2D = (dx, dy) => {\n  const board2D = createBoard2D(dx, dy)\n  // TODO: Refactoring\n  const board = new Board(board2D)\n  const methodNames = ['swapAbove', 'swapLeft', 'swapRight', 'swapBelow']\n  const len = methodNames.length\n  for (let i = 0; i < 100; i++) {\n    const methodName = methodNames[Math.floor(Math.random() * len)]\n    try {\n      board[methodName](board.blankpos)\n    } catch (e) {\n      continue\n    }\n  }\n  return board\n}\n\nexport default {\n  name: 'PuzzleBoard',\n  data() {\n    this._blockPositions = []\n    this._isStarted = false\n    const board = createRandomBoard2D(this.cols, this.rows)\n    return {\n      isTouchNeeded: true,\n      blocks: board.blocks,\n      isGoal: false,\n      manhattan: null,\n      hamming: null,\n      internalWidth: this.width,\n      internalHeight: this.height,\n      board: board,\n      rafId: null\n    }\n  },\n  props: {\n    src: {\n      type: String\n    },\n    sources: {\n      type: Array\n    },\n    muted: {\n      type: Boolean,\n      default: true\n    },\n    animation: {\n      type: Boolean,\n      default: true\n    },\n    cols: {\n      type: Number,\n      default: 4\n    },\n    width: {\n      type: Number,\n      default: 300\n    },\n    height: {\n      type: Number,\n      default: 300\n    },\n    rows: {\n      type: Number,\n      default: 4\n    },\n    showNumber: {\n      type: Boolean,\n      default: true\n    },\n    autoResize: {\n      type: Boolean,\n      default: false\n    }\n  },\n  computed: {\n    cellWidth() {\n      return this.internalWidth / this.cols\n    },\n    cellHeight() {\n      return this.internalHeight / this.rows\n    },\n    isImage() {\n      return /\\.(jpg|png|webm|gif)$/i.test(this.src)\n    },\n    canvasStyle() {\n      return {\n        left: this.isGoal ? '-100%' : 0\n      }\n    },\n    sourceStyle() {\n      return {\n        // display: 'none'\n        visibility: 'hidden'\n      }\n    }\n  },\n  beforeDestroy() {\n    if (this.rafId) {\n      cancelAnimationFrame(this.rafId)\n    }\n  },\n  mounted() {\n    this.onResize()\n    window.addEventListener('resize', debounce(this.onResize.bind(this), 300))\n    this._tmpCanvas = document.createElement('canvas')\n    this._tmpCtx = this._tmpCanvas.getContext('2d')\n    this._lastRenderVideoTime = -1\n    this._lastRenderTime = 0\n    if (this.isImage) {\n      this.$refs.sourceImg.onload = () => {\n        this.isTouchNeeded = false\n        this._loadImageToCanvas()\n      }\n    } else {\n      this.$refs.sourceImg.addEventListener('play', () => {\n        this.isTouchNeeded = false\n      })\n    }\n    const loop = () => {\n      TWEEN.update()\n      if (this.$refs.sourceImg == null || this.$refs.sourceImg.readyState < 3) {\n        requestAnimationFrame(loop)\n        return\n      }\n      const sourceImg = this.$refs.sourceImg\n      const canvas = this.$refs['puzzle-canvas']\n      const ctx = canvas.getContext('2d')\n      const w = this.internalWidth\n\n      // copy from video\n      if (sourceImg.currentTime !== this._lastRender) {\n        this._lastRenderVideoTime = sourceImg.currentTime\n\n        // TODO: choose trimming strategy\n        // trims square area from the center of the source\n\n        this._loadVideoFrameToCanvas()\n      }\n\n      if (this.isGoal) {\n        requestAnimationFrame(loop)\n        return\n      }\n\n      // main render\n      ctx.clearRect(0, 0, this.internalWidth, this.internalHeight)\n\n      // number\n      if (this.showNumber) {\n        ctx.font = \"24px 'Avenir', Helvetica, Arial, sans-serif\";\n        ctx.fillStyle = \"#e91e63\";\n        ctx.textBaseline = 'top';\n      }\n\n      for (let i = 0, len = this.blocks.length; i < len; i++) {\n        const block = this.blocks[i]\n        if (block === 0) {\n          continue\n        }\n        const row = this.board.row(block - 1)\n        const col = this.board.col(block - 1)\n        const sourceX = this.cellWidth * col + w\n        const sourceY = this.cellHeight * row\n        const pos = this._blockPositions[block]\n        if (pos == null) {\n          continue\n        }\n        const targetX = pos.x\n        const targetY = pos.y\n        ctx.drawImage(\n          canvas,\n          sourceX,\n          sourceY,\n          this.cellWidth,\n          this.cellHeight,\n          targetX,\n          targetY,\n          this.cellWidth,\n          this.cellHeight\n        )\n        if (this.showNumber) {\n          const text = String(block)\n          const margin = 5\n          ctx.strokeText(text, margin + targetX, margin + targetY)\n          ctx.fillText(text, margin + targetX, margin + targetY)\n        }\n      }\n      this.rafId = requestAnimationFrame(loop)\n    }\n    this.$nextTick(loop)\n    this.$emit('init')\n  },\n  watch: {\n    cols() {\n      this.initBoard()\n    },\n    rows() {\n      this.initBoard()\n    },\n    board() {\n      this.blocks = this.board.blocks\n    },\n    width() {\n      this.onResize()\n    },\n    height() {\n      this.onResize()\n    },\n    blocks() {\n      const isImmediate = !this.animation\n      this.updateBlockPositions(isImmediate)\n      this.isGoal = this.board.isGoal()\n      this.manhattan = this.board.manhattan()\n      this.hamming = this.board.hamming()\n      this.$emit('change', {\n        blocks: this.blocks,\n        isGoal: this.isGoal,\n        distance: this.manhattan\n      })\n    },\n    isGoal() {\n      if (this.isGoal) {\n        this.$emit('finish')\n      }\n    },\n    sources() {\n      if (!this.isImage) {\n        // load and play video after the video element appears\n        this.$nextTick(() => {\n          this.$refs.sourceImg.load()\n          this.isTouchNeeded = true\n          this.$refs.sourceImg.play()\n          this.$refs.sourceImg.addEventListener('play', () => {\n            this.isTouchNeeded = false\n          })\n        })\n      }\n    },\n    src() {\n      if (this.isImage) {\n        this.isTouchNeeded = false\n        // add onLoadImage hook after the img element appears\n        this.$nextTick(() => {\n          this.$refs.sourceImg.addEventListener('load', () => {\n            this._loadImageToCanvas()\n          })\n        })\n      }\n    }\n  },\n  methods: {\n    initBoard() {\n      this.board = createRandomBoard2D(this.cols, this.rows)\n      this._blockPositions = []\n      this._isStarted = false\n      this.$emit('init')\n    },\n    updateBlockPositions(isImmediate) {\n      for (let i = 0, len = this.blocks.length; i < len; i++) {\n        const b = this.blocks[i]\n        const col = this.board.col(i)\n        const row = this.board.row(i)\n        const x = this.cellWidth * col\n        const y = this.cellHeight * row\n        const from = this._blockPositions[b] || { x: 0, y: 0 }\n        if (this._blockPositions[b] == null) {\n          this._blockPositions[b] = from\n        }\n        if (from.x - x === 0 && from.y - y === 0) {\n          continue\n        }\n        const obj = { x: from.x, y: from.y }\n        if (isImmediate) {\n          this._blockPositions[b].x = x\n          this._blockPositions[b].y = y\n        } else {\n          new TWEEN.Tween(obj)\n            .to({ x, y }, 200)\n            .easing(TWEEN.Easing.Quadratic.Out)\n            .onUpdate(() => {\n              this._blockPositions[b].x = obj.x\n              this._blockPositions[b].y = obj.y\n            })\n            .start()\n        }\n      }\n    },\n    _loadImageToCanvas() {\n      // TODO: Refactor\n      const sourceImg = this.$refs.sourceImg\n      const canvas = this.$refs['puzzle-canvas']\n      const ctx = canvas.getContext('2d')\n      const w = this.width\n      const h = this.height\n      const vw = sourceImg.width\n      const vh = sourceImg.height\n      const ratio = Math.max(w / vw, h / vh)\n\n      // NOTE: iOS11 has a memory leak on canvas.drawImage with 9 args\n      // if the image is scaled.\n      // to prevent them I have to use 5 args version for scaling\n      this._tmpCanvas.width = vw * ratio\n      this._tmpCanvas.height = vh * ratio\n      this._tmpCtx.drawImage(sourceImg, 0, 0, vw * ratio, vh * ratio)\n\n      // copies clipped video source to canvas for sync drawing\n      const marginX = (vw * ratio - w) / 2\n      const marginY = (vh * ratio - h) / 2\n      ctx.drawImage(this._tmpCanvas, marginX, marginY, w, h, w, 0, w, h)\n    },\n    _loadVideoFrameToCanvas() {\n      const sourceImg = this.$refs.sourceImg\n      const canvas = this.$refs['puzzle-canvas']\n      const ctx = canvas.getContext('2d')\n      const w = this.internalWidth\n      const h = this.internalHeight\n      const vw = sourceImg.videoWidth\n      const vh = sourceImg.videoHeight\n      const ratio = Math.max(w / vw, h / vh)\n\n      // NOTE: iOS11 has a memory leak on canvas.drawImage with 9 args\n      // if the image is scaled.\n      // to prevent them I have to use 5 args version for scaling\n      this._tmpCanvas.width = vw * ratio\n      this._tmpCanvas.height = vh * ratio\n      this._tmpCtx.drawImage(sourceImg, 0, 0, vw * ratio, vh * ratio)\n\n      // copies clipped video source to canvas for sync drawing\n      const marginX = (vw * ratio - w) / 2\n      const marginY = (vh * ratio - h) / 2\n      ctx.drawImage(this._tmpCanvas, marginX, marginY, w, h, w, 0, w, h)\n    },\n    slide(idx) {\n      if (!this._isStarted) {\n        this._isStarted = true\n        this.$emit('start')\n      }\n      this.board.slide(idx)\n      Vue.set(this, 'blocks', this.board.blocks.concat())\n    },\n    onTouchEnd(event) {\n      if (this.isTouchNeeded) {\n        this.$refs.sourceImg.play()\n      }\n      const touch = event.changedTouches[0]\n      const rect = this.$el.getBoundingClientRect()\n      const x = touch.clientX - rect.left\n      const y = touch.clientY - rect.top\n      this.handleClick(x, y)\n    },\n    onClick(event) {\n      // NOTE: canvas is shifted to left when finished\n      const x = event.offsetX - (this.isGoal ? this.width : 0)\n      const y = event.offsetY\n      this.handleClick(x, y)\n    },\n    handleClick(x, y) {\n      x = x / this.cellWidth\n      y = y / this.cellHeight\n      const col = Math.floor(x)\n      const row = Math.floor(y)\n      const idx = row * this.cols + col\n      this.slide(idx)\n    },\n    onClickBoard() {\n      this.$el.focus()\n    },\n    onResize() {\n      const w = this.$el.offsetWidth\n      const h = this.$el.offsetHeight\n      if (this.autoResize) {\n        this.internalWidth = w\n        this.internalHeight = h\n      } else {\n        this.internalWidth = this.width\n        this.internalHeight = this.height\n      }\n      if (this.isImage) {\n        this.$nextTick(this._loadImageToCanvas.bind(this))\n      }\n      this.updateBlockPositions(true)\n    },\n    onKeyUp(event) {\n      const bp = this.board.blankpos\n      const len = this.blocks.length\n      switch (event.keyCode) {\n        case 37:\n          if (bp + 1 < len) {\n            this.slide(bp + 1)\n          }\n          break\n        case 38:\n          if (bp + this.cols < len) {\n            this.slide(bp + this.cols)\n          }\n          break\n        case 39:\n          if (bp - 1 >= 0) {\n            this.slide(bp - 1)\n          }\n          break\n        case 40:\n          if (bp - this.cols >= 0) {\n            this.slide(bp - this.cols)\n          }\n      }\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n#sourceImg,\n#targetImg {\n  width: 300;\n  height: 300;\n}\n.puzzle-canvas {\n  position: absolute;\n  margin: 0;\n  padding: 0;\n  top: 0;\n  left: 0;\n  width: 200%;\n  height: 100%;\n}\n.puzzle-message {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.puzzle-board {\n  position: absolute;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n}\n.tile-number {\n  position: absolute;\n  text-shadow: 1px 1px 0 #222;\n  color: #fafafa;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/PuzzleBoard.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"puzzle-board\",attrs:{\"tabindex\":\"-1\"},on:{\"keyup\":function($event){$event.preventDefault();return _vm.onKeyUp($event)},\"click\":_vm.onClickBoard}},[(_vm.isTouchNeeded)?_c('div',{staticClass:\"puzzle-message\"},[_vm._v(\"Touch to start\")]):_vm._e(),_vm._v(\" \"),_c('canvas',{ref:\"puzzle-canvas\",staticClass:\"puzzle-canvas\",style:(_vm.canvasStyle),attrs:{\"width\":_vm.internalWidth * 2,\"height\":_vm.internalHeight},on:{\"click\":function($event){$event.preventDefault();},\"mousedown\":function($event){$event.preventDefault();},\"mouseup\":function($event){$event.preventDefault();return _vm.onClick($event)},\"touchend\":function($event){$event.preventDefault();return _vm.onTouchEnd($event)}}}),_vm._v(\" \"),(_vm.isImage)?_c('img',{ref:\"sourceImg\",style:(_vm.sourceStyle),attrs:{\"src\":_vm.src}}):_c('video',{ref:\"sourceImg\",style:(_vm.sourceStyle),attrs:{\"autoplay\":\"\",\"loop\":\"\",\"playsinline\":\"\",\"src\":_vm.src,\"width\":_vm.internalWidth,\"height\":_vm.internalHeight},domProps:{\"muted\":_vm.muted}},[_vm._l((_vm.sources),function(source){return _c('source',{key:source.src,attrs:{\"src\":source.src,\"type\":source.type}})}),_vm._v(\"No video\\n  \")],2)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3ddee02e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/PuzzleBoard.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3ddee02e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./PuzzleBoard.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PuzzleBoard.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PuzzleBoard.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3ddee02e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./PuzzleBoard.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3ddee02e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/PuzzleBoard.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <div class=\"header\">\n      <div\n        class=\"header-item title\"\n        @click=\"onTitleClick\"\n      >Hello Lan Anh!</div>\n      <!-- <div class=\"header-item distance\">d: {{distance}}</div> -->\n      <div class=\"header-item spacer\"></div>\n      <div @click=\"onMeowClick\" class=\"header-item meow\">Đổi hình khác!</div>\n      <div class=\"header-item spacer\"></div>\n      <!-- <div class=\"header-item\">\n        <label for=\"showNumber\">#:</label>\n        <input\n          type=\"checkbox\"\n          id=\"showNumber\"\n          v-model=\"showNumber\"\n        >\n      </div> -->\n      <!-- <div class=\"header-item\">\n        <label for=\"animation\">a:</label>\n        <input\n          type=\"checkbox\"\n          id=\"animation\"\n          v-model=\"show\"\n        >\n      </div> -->\n      <div class=\"header-item panel\">\n        <template v-if=\"isGoal\">finish!!</template>\n        <select v-model=\"difficulty\">\n          <option>Easy</option>\n          <option>Normal</option>\n          <option>Difficult</option>\n        </select>\n      </div>\n    </div>\n    <div class=\"container\">\n      <puzzle-board v-if=\"show\"\n        :autoResize=\"autoResize\"\n        :showNumber=\"showNumber\"\n        :cols=\"dimensions.x\"\n        :rows=\"dimensions.y\"\n        :src=\"src\"\n        :sources=\"sources\"\n        :animation=\"animation\"\n        :width=\"width\"\n        :height=\"height\"\n        @init=\"onPuzzleBoardInit\"\n        @start=\"onPuzzleBoardStart\"\n        @change=\"onPuzzleBoardChange\"\n        @finish=\"onPuzzleBoardFinish\"\n      />\n    </div>\n    <div\n      class=\"repo\"\n      @click=\"onTitleClick\"\n    >made by <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.facebook.com/thangnm99\">người này</a>\n</div>\n  </div>\n</template>\n\n<script>\n// import PuzzleBoard from './components/PuzzleBoard'\nimport PuzzleBoard from './components/PuzzleBoard.vue'\n\nimport mylove2 from './assets/love2.mp4'\nimport mylove from './assets/love.mp4'\nconst SOURCEPATHS = {\n  Love: {\n    sources: [\n      {\n        src: mylove,\n        type: 'video/mp4'\n      }\n    ]\n  },\n  Love2: {\n    sources: [\n      {\n        src: mylove2,\n        type: 'video/mp4'\n      }\n    ]\n  },\n  Giphy: {}\n}\nconst DIMENSIONS = {\n  Easy: { x: 3, y: 3 },\n  Normal: { x: 4, y: 4 },\n  Difficult: { x: 5, y: 5 }\n}\nconst getGiphySrc = async function() {\n  // const res = await fetch(\n  //   '//api.giphy.com/v1/gifs/random?api_key=nZATgU4T4iauIJqCFu8rFvoCxCqBRwMt&rating=g&tag=cat'\n  // )\n  // const data = await res.json()\n  // const url = data.data.image_mp4_url\n  return [\n    {\n      src: mylove2,\n      type: 'video/mp4'\n    }\n  ]\n}\nexport default {\n  name: 'App',\n  components: {\n    PuzzleBoard\n  },\n  data() {\n    return {\n      show: true,\n      videoTitle: 'Love',\n      difficulty: 'Easy',\n      distance: null,\n      isGoal: false,\n      autoResize: true,\n      width: 300,\n      height: 300,\n      showNumber: true,\n      animation: true,\n      sources: SOURCEPATHS['Love'].sources\n    }\n  },\n  created() {},\n  computed: {\n    src() {\n      return SOURCEPATHS[this.videoTitle].src\n    },\n    dimensions() {\n      return DIMENSIONS[this.difficulty]\n    }\n  },\n  watch: {\n    isGoal(isGoal) {\n      if (isGoal) {\n        this.$confetti.start({\n          shape: 'rect'\n        })\n      } else {\n        this.$confetti.stop()\n      }\n    }\n  },\n  methods: {\n    onTitleClick() {\n      window.open('https://www.facebook.com/thangnm99')\n    },\n    onMeowClick() {\n      getGiphySrc().then(data => {\n        this.sources = data\n      })\n    },\n    onPuzzleBoardInit() {\n      console.log('init')\n      this.isGoal = false\n    },\n    onPuzzleBoardStart() {\n      console.log('start')\n    },\n    onPuzzleBoardFinish() {\n      console.log('finish')\n      this.isGoal = true\n    },\n    onPuzzleBoardChange: function(payload) {\n      console.log('change')\n      this.distance = payload.distance\n    }\n  }\n}\n</script>\n\n<style>\nhtml,\nbody {\n  margin: 0;\n  padding: 0;\n  background-color: #fafafa;\n}\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n.header {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  z-index: 2;\n  font-size: 1.4em;\n  position: absolute;\n  width: 100%;\n  height: 60px;\n  color: #fafafa;\n  background-color: #e91e63;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n}\n.header-item {\n  flex-grow: 0;\n}\n.title {\n  width: 20%;\n  padding: 0 5px;\n  font-weight: bold;\n  font-size: 0.8em;\n}\n.spacer {\n  flex-grow: 1;\n}\n.meow {\n  color: white;\n  cursor: pointer;\n  font-weight: bold;\n  font-size: 1.2em;\n}\n.panel {\n  width: 20%;\n}\n.container {\n  position: absolute;\n  top: calc(50% + 30px);\n  left: 50%;\n  transform: translate(-50%, -50%);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.16), 0 2px 4px rgba(0, 0, 0, 0.23);\n  width: 90%;\n  height: calc(90% - 60px);\n  margin: 0px;\n  padding: 0px;\n  z-index: 1;\n  background-color: #DDD;\n  max-width: 600px;\n  max-height: 600px;\n}\n.repo {\n  position: absolute;\n  bottom: 5px;\n  right: 5px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"header-item title\",on:{\"click\":_vm.onTitleClick}},[_vm._v(\"Hello Lan Anh!\")]),_vm._v(\" \"),_c('div',{staticClass:\"header-item spacer\"}),_vm._v(\" \"),_c('div',{staticClass:\"header-item meow\",on:{\"click\":_vm.onMeowClick}},[_vm._v(\"Đổi hình khác!\")]),_vm._v(\" \"),_c('div',{staticClass:\"header-item spacer\"}),_vm._v(\" \"),_c('div',{staticClass:\"header-item panel\"},[(_vm.isGoal)?[_vm._v(\"finish!!\")]:_vm._e(),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.difficulty),expression:\"difficulty\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.difficulty=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',[_vm._v(\"Easy\")]),_vm._v(\" \"),_c('option',[_vm._v(\"Normal\")]),_vm._v(\" \"),_c('option',[_vm._v(\"Difficult\")])])],2)]),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[(_vm.show)?_c('puzzle-board',{attrs:{\"autoResize\":_vm.autoResize,\"showNumber\":_vm.showNumber,\"cols\":_vm.dimensions.x,\"rows\":_vm.dimensions.y,\"src\":_vm.src,\"sources\":_vm.sources,\"animation\":_vm.animation,\"width\":_vm.width,\"height\":_vm.height},on:{\"init\":_vm.onPuzzleBoardInit,\"start\":_vm.onPuzzleBoardStart,\"change\":_vm.onPuzzleBoardChange,\"finish\":_vm.onPuzzleBoardFinish}}):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"repo\",on:{\"click\":_vm.onTitleClick}},[_vm._v(\"made by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.facebook.com/thangnm99\"}},[_vm._v(\"người này\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3b5d6e24\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3b5d6e24\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3b5d6e24\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport VueConfetti from 'vue-confetti'\n\nVue.use(VueConfetti)\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","module.exports = __webpack_public_path__ + \"static/media/love2.5aeb159.mp4\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/love2.mp4\n// module id = WSo8\n// module chunks = 1"],"sourceRoot":""}